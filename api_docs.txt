# Seoul Fit Backend API ì—°ë™ ë¬¸ì„œ (ìµœì‹  ì—…ë°ì´íŠ¸)
# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì°¸ê³ ìš© API ëª…ì„¸ì„œ

Base URL: http://localhost:8080

## ì¸ì¦ (Authentication) - /api/auth

### 1. OAuth ì¸ê°€ì½”ë“œ ê²€ì¦
POST /api/auth/oauth/authorizecheck
- ëª©ì : í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°›ì€ ì¸ê°€ì½”ë“œë¡œ OAuth ì œê³µìì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¯¸ë¦¬ í™•ì¸
- Request Body:
  {
    "provider": "KAKAO",
    "authorizationCode": "string",
    "redirectUri": "string"
  }
- Response:
  {
    "userId": "string",
    "email": "string", 
    "nickname": "string",
    "profileImageUrl": "string",
    "exists": boolean
  }

### 2. OAuth ì‚¬ìš©ì í™•ì¸
POST /api/auth/oauth/check
- ëª©ì : OAuth ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- Request Body:
  {
    "provider": "KAKAO",
    "oauthUserId": "string"
  }
- Response:
  {
    "exists": boolean,
    "userId": "string",
    "email": "string"
  }

### 3. OAuth ë¡œê·¸ì¸ (Authorization Code Flow)
POST /api/auth/oauth/login
- ëª©ì : OAuth ê¶Œí•œë¶€ì—¬ ìŠ¹ì¸ì½”ë“œë¡œ ë¡œê·¸ì¸
- Request Body:
  {
    "provider": "KAKAO", 
    "authorizationCode": "string",
    "redirectUri": "string"
  }
  ë˜ëŠ” (deprecated)
  {
    "provider": "KAKAO",
    "oauthUserId": "string" 
  }
- Response:
  {
    "accessToken": "string",
    "refreshToken": "string",
    "user": {
      "id": number,
      "nickname": "string"
    }
  }

### 4. OAuth ê°„í¸ ë¡œê·¸ì¸
POST /api/auth/oauth/login/simple
- Query Parameters: provider, code, redirectUri
- Response: TokenResponseì™€ ë™ì¼

### 5. OAuth íšŒì›ê°€ì…
POST /api/auth/oauth/signup
- Request Body:
  {
    "provider": "KAKAO",
    "oauthUserId": "string",
    "nickname": "string", 
    "email": "string",
    "profileImageUrl": "string",
    "interests": ["SPORTS", "CULTURE", "RESTAURANTS"]
  }
- Response: TokenResponseì™€ ë™ì¼

### 6. í† í° ê°±ì‹ 
POST /api/auth/refresh
- Query Parameters: refreshToken
- Response: TokenResponseì™€ ë™ì¼

### 7. ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
GET /api/auth/check-email?email={email}
- Response: boolean

### 8. OAuth ì¸ì¦ URL ìƒì„±
GET /api/auth/oauth/url/{provider}?redirectUri={uri}&scope={scope}&state={state}
- Response:
  {
    "authUrl": "string",
    "provider": "string",
    "redirectUri": "string"
  }

### 9. OAuth ë¡œê·¸ì•„ì›ƒ
POST /api/auth/oauth/logout
- Headers: Authorization: Bearer {token}
- Response:
  {
    "result": "string",
    "message": "string"
  }

### 10. ìœ„ì¹˜ ê¸°ë°˜ ë¡œê·¸ì¸
POST /api/auth/login/location
- Request Body:
  {
    "userId": "string",
    "latitude": number,
    "longitude": number,
    "radius": number
  }
- Response:
  {
    "success": boolean,
    "userId": number,
    "nickname": "string",
    "email": "string", 
    "accessToken": "string",
    "refreshToken": "string",
    "triggerEvaluation": {...}
  }

### 11. OAuth ì—°ê²° í•´ì œ
POST /api/auth/oauth/unlink
- Headers: Authorization: Bearer {token}
- Response: Map<String, Object>

### 12. OAuth ì¸ê°€ ìš”ì²­ (ë¦¬ë‹¤ì´ë ‰íŠ¸)
GET /api/auth/oauth/authorize/{provider}?redirectUri={uri}&scope={scope}&state={state}
- Response: 302 Redirect to OAuth provider

## ì‚¬ìš©ì ê´€ë¦¬ (Users) - /api/users

### 1. ì‚¬ìš©ì ì¡°íšŒ
GET /api/users/{userId}
- Response: UserResult

### 2. ë‚´ ì •ë³´ ì¡°íšŒ
GET /api/users/me?authUserId={userId}
- Response: UserResult

### 3. ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
PUT /api/users/{userId}
- Request Body:
  {
    "nickname": "string",
    "profileImageUrl": "string",
    "locationLatitude": number,
    "locationLongitude": number, 
    "locationAddress": "string",
    "interests": ["SPORTS"]
  }
- Response: UserResult

### 4. ì‚¬ìš©ì ì‚­ì œ
DELETE /api/users/{userId}
- Response: 204 No Content

## ì‚¬ìš©ì ê´€ì‹¬ì‚¬ (User Interests) - /api/users/interests

### 1. ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ì¡°íšŒ
POST /api/users/interests
- Request Body: userId (Long)
- Response:
  {
    "userId": number,
    "interests": ["SPORTS", "CULTURE"]
  }

### 2. ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ë³€ê²½
PUT /api/users/interests
- Request Body:
  {
    "userId": number,
    "interests": ["SPORTS", "CULTURE", "RESTAURANTS"]
  }
- Response: UserInterestResponse

## ìœ„ì¹˜ ê¸°ë°˜ ë°ì´í„° (Location Data) - /api/location
â€» ì¸ì¦ í•„ìš” (Bearer Token)

### 1. ìœ„ì¹˜ ê¸°ë°˜ í†µí•© ë°ì´í„° ì¡°íšŒ
GET /api/location/nearby?latitude={lat}&longitude={lng}&radius={radius}
- ëª©ì : ì‚¬ìš©ì ìœ„ì¹˜ ì£¼ë³€ì˜ ëª¨ë“  ì‹œì„¤ ì •ë³´ë¥¼ í†µí•©í•˜ì—¬ ë°˜í™˜ (ì§€ë„ ë§ˆì»¤ìš©)
- Query Parameters:
  - latitude: ìœ„ë„ (required, -90.0~90.0)
  - longitude: ê²½ë„ (required, -180.0~180.0)  
  - radius: ê²€ìƒ‰ ë°˜ê²½(km) (default: 2.0)
- Response: LocationDataResponse (í†µí•© ë°ì´í„°)

### 2. ê°œì¸í™”ëœ ìœ„ì¹˜ ê¸°ë°˜ ë°ì´í„° ì¡°íšŒ
GET /api/location/nearby/personalized?latitude={lat}&longitude={lng}&radius={radius}
- ëª©ì : ì‚¬ìš©ì ê´€ì‹¬ì‚¬ì— ë”°ë¼ ë§ì¶¤í˜• ìœ„ì¹˜ ê¸°ë°˜ ë°ì´í„° ì¡°íšŒ
- Headers: Authorization: Bearer {token}
- Query Parameters: ìœ„ì™€ ë™ì¼
- Response: LocationDataResponse (ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ê¸°ë°˜)

### 3. ìœ„ì¹˜ ê¸°ë°˜ ë§›ì§‘ ì¡°íšŒ
GET /api/location/restaurants?latitude={lat}&longitude={lng}&radius={radius}
- Response: RestaurantsResponse

### 4. ìœ„ì¹˜ ê¸°ë°˜ ë„ì„œê´€ ì¡°íšŒ
GET /api/location/libraries?latitude={lat}&longitude={lng}&radius={radius}
- Response: LibrariesResponse

### 5. ìœ„ì¹˜ ê¸°ë°˜ ê³µì› ì¡°íšŒ
GET /api/location/parks?latitude={lat}&longitude={lng}&radius={radius}
- Response: ParksResponse

### 6. ìœ„ì¹˜ ê¸°ë°˜ ì²´ìœ¡ì‹œì„¤ ì¡°íšŒ
GET /api/location/sports-facilities?latitude={lat}&longitude={lng}&radius={radius}
- Response: SportsFacilitiesResponse

### 7. ìœ„ì¹˜ ê¸°ë°˜ ë¬´ë”ìœ„ì‰¼í„° ì¡°íšŒ
GET /api/location/cooling-centers?latitude={lat}&longitude={lng}&radius={radius}
- Response: CoolingCentersResponse

## ì„œìš¸ì‹œ ê³µì› (Seoul Parks) - /api/parks

### 1. ê³µì› ì „ì²´ ì¡°íšŒ
GET /api/parks/all
- Response: List<ParkSummaryResponse>

### 2. ê·¼ì²˜ ê³µì› ì¡°íšŒ
GET /api/parks/nearby?latitude={lat}&longitude={lng}
- Response: List<ParkResponse>

### 3. ê³µì› ìƒì„¸ ì •ë³´ ì¡°íšŒ (í–¥í›„ êµ¬í˜„)
GET /api/parks/detail?parkId={id}
- Response: ParkResponse

## ê´€ê´‘ ìŒì‹ì  (Tourist Restaurants) - /api/v1/tourist-restaurants

### 1. ìµœì‹  ìŒì‹ì  ì •ë³´ ì¡°íšŒ
GET /api/v1/tourist-restaurants/latest
- Response: List<TouristRestaurant>

### 2. íŠ¹ì • ë‚ ì§œ ìŒì‹ì  ì •ë³´ ì¡°íšŒ
GET /api/v1/tourist-restaurants/date/{dataDate}
- Path Parameter: dataDate (YYYYMMDD í˜•ì‹)
- Response: List<TouristRestaurant>

### 3. ì–¸ì–´ë³„ ìŒì‹ì  ì •ë³´ ì¡°íšŒ
GET /api/v1/tourist-restaurants/language/{langCodeId}?dataDate={date}
- Path Parameter: langCodeId (ì˜ˆ: "ko", "en")
- Query Parameter: dataDate (optional)
- Response: List<TouristRestaurant>

### 4. ìŒì‹ì ëª… ê²€ìƒ‰
GET /api/v1/tourist-restaurants/search/name?name={name}&dataDate={date}
- Query Parameters: name (required), dataDate (optional)
- Response: List<TouristRestaurant>

### 5. ì£¼ì†Œ ê²€ìƒ‰
GET /api/v1/tourist-restaurants/search/address?address={address}&dataDate={date}
- Query Parameters: address (required), dataDate (optional)
- Response: List<TouristRestaurant>

### 6. ìŒì‹ì  ìƒì„¸ ì •ë³´ ì¡°íšŒ
GET /api/v1/tourist-restaurants/{id}
- Path Parameter: id
- Response: TouristRestaurant ë˜ëŠ” 404

### 7. ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„° ë‚ ì§œ ëª©ë¡
GET /api/v1/tourist-restaurants/available-dates
- Response: List<String>

### 8. ìŒì‹ì  ë°ì´í„° í†µê³„
GET /api/v1/tourist-restaurants/statistics?dataDate={date}
- Query Parameter: dataDate (optional)
- Response: RestaurantDataStatistics

### 9. ìˆ˜ë™ ë°°ì¹˜ ì‹¤í–‰ (ê´€ë¦¬ììš©)
POST /api/v1/tourist-restaurants/batch/manual?dataDate={date}
- Query Parameter: dataDate (optional)
- Response: TouristRestaurantBatchResult

## ë¬´ë”ìœ„ ì‰¼í„° (Cooling Shelter) - /api/v1/cooling-shelters

### 1. ë¬´ë”ìœ„ì‰¼í„° ì „ì²´ ì¡°íšŒ
GET /api/v1/cooling-shelters/all
- Response: List<CoolingCenterResponse>

### 2. ê·¼ì²˜ ë¬´ë”ìœ„ì‰¼í„° ì¡°íšŒ
GET /api/v1/cooling-shelters/nearby?latitude={lat}&longitude={lng}
- Query Parameters:
  - latitude: ìœ„ë„ (required)
  - longitude: ê²½ë„ (required)
- Response: List<CoolingCenterResponse>

## ë„ì„œê´€ (Libraries) - /api/v1/libraries

### 1. ë„ì„œê´€ ì „ì²´ ì¡°íšŒ
GET /api/v1/libraries/all
- Response: List<LibraryResponse>

### 2. ê·¼ì²˜ ë„ì„œê´€ ì¡°íšŒ
GET /api/v1/libraries/nearby?latitude={lat}&longitude={lng}
- Response: List<LibraryResponse>

## ë¬¸í™” ì‹œì„¤ (Cultural Facilities) - /api/v1/cultural-*

### ë¬¸í™” ê³µê°„
GET /api/v1/cultural-spaces/all
GET /api/v1/cultural-spaces/nearby?latitude={lat}&longitude={lng}

### ë¬¸í™” í–‰ì‚¬
GET /api/v1/cultural-events/all
GET /api/v1/cultural-events/nearby?latitude={lat}&longitude={lng}

### ë¬¸í™” ì˜ˆì•½
GET /api/v1/cultural-reservations/all
GET /api/v1/cultural-reservations/nearby?latitude={lat}&longitude={lng}

## ëŒ€ê¸°ì§ˆ (Air Quality) - /api/v1/air-quality

### 1. ëŒ€ê¸°ì§ˆ ì •ë³´ ì¡°íšŒ
GET /api/v1/air-quality/all
GET /api/v1/air-quality/nearby?latitude={lat}&longitude={lng}

## ì•Œë¦¼ (Notifications) - /api/notifications

### 1. ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ
GET /api/notifications
- Headers: Authorization: Bearer {token}

### 2. ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
PUT /api/notifications/{id}/read
- Headers: Authorization: Bearer {token}

## íŠ¸ë¦¬ê±° (Triggers) - /api/triggers

### 1. ìœ„ì¹˜ ê¸°ë°˜ íŠ¸ë¦¬ê±° í‰ê°€
POST /api/triggers/evaluate/location
- Headers: Authorization: Bearer {token}
- Request Body:
  {
    "userId": "string",
    "latitude": number,
    "longitude": number,
    "radius": number
  }

## ê³µí†µ ì‘ë‹µ í˜•ì‹

### LocationDataResponse (í†µí•© ë°ì´í„° ì‘ë‹µ)
{
  "center": {
    "latitude": number,
    "longitude": number
  },
  "radius": number,
  "totalCount": number,
  "restaurants": [...],
  "libraries": [...], 
  "parks": [...],
  "sportsFacilities": [...],
  "coolingCenters": [...]
}

### UserResult ê°ì²´
{
  "id": number,
  "email": "string",
  "nickname": "string", 
  "status": "string",
  "oauthProvider": "string",
  "oauthUserId": "string",
  "profileImageUrl": "string",
  "interests": [...]
}

### ì—ëŸ¬ ì‘ë‹µ í˜•ì‹
{
  "error": "ì—ëŸ¬ ë©”ì‹œì§€",
  "code": "ì—ëŸ¬ ì½”ë“œ",
  "timestamp": "2025-08-12T00:00:00"
}

## ì¸ì¦ ê´€ë ¨ í—¤ë”
- Authorization: Bearer {accessToken}

## ì§€ì›í•˜ëŠ” ê´€ì‹¬ì‚¬ ì¹´í…Œê³ ë¦¬
- SPORTS: ì²´ìœ¡ì‹œì„¤
- CULTURE: ë¬¸í™”ì‹œì„¤  
- RESTAURANTS: ë§›ì§‘
- LIBRARY: ë„ì„œê´€
- PARK: ê³µì›
- SUBWAY: ì§€í•˜ì² 
- BIKE: ë”°ë¦‰ì´
- COOLING_SHELTER: ë¬´ë”ìœ„ì‰¼í„°

## OAuth ì œê³µì
- KAKAO: ì¹´ì¹´ì˜¤
- GOOGLE: êµ¬ê¸€ (ì§€ì› ì˜ˆì •)

## ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­
1. ëª¨ë“  API í˜¸ì¶œ ì „ì— ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ í™•ì¸
2. ìœ„ì¹˜ ê¸°ë°˜ APIëŠ” ì‚¬ìš©ì ìœ„ì¹˜ ê¶Œí•œ í•„ìš”  
3. ë°°ì¹˜ ê´€ë ¨ APIëŠ” ê´€ë¦¬ì ê¶Œí•œ í•„ìš”
4. ë‚ ì§œ í˜•ì‹ì€ YYYYMMDD (ì˜ˆ: 20250812)
5. ì¢Œí‘œëŠ” WGS84 í˜•ì‹ ì‚¬ìš©
6. í† í° ë§Œë£Œ ì‹œ ìë™ ê°±ì‹  ë¡œì§ êµ¬í˜„ í•„ìš”

## API URL íŒ¨í„´ ì •ë¦¬
- ì¸ì¦: /api/auth/*
- ì‚¬ìš©ì: /api/users/*
- ìœ„ì¹˜ ë°ì´í„°: /api/location/*
- ê³µì›: /api/parks/*
- ê´€ê´‘ ìŒì‹ì : /api/v1/tourist-restaurants/*
- ë¬´ë”ìœ„ì‰¼í„°: /api/v1/cooling-shelters/*
- ë„ì„œê´€: /api/v1/libraries/*
- ë¬¸í™”ì‹œì„¤: /api/v1/cultural-*/*
- ëŒ€ê¸°ì§ˆ: /api/v1/air-quality/*
- ì•Œë¦¼: /api/notifications/*
- íŠ¸ë¦¬ê±°: /api/triggers/*

## í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ìƒíƒœ
âœ… ì—°ë™ ì™„ë£Œ: OAuth ë¡œê·¸ì¸, ì‚¬ìš©ì ê´€ë¦¬ ê¸°ë³¸ ê¸°ëŠ¥
ğŸ”„ ë¶€ë¶„ ì—°ë™: ìœ„ì¹˜ ê¸°ë°˜ ë°ì´í„° ì¡°íšŒ 
âŒ ë¯¸ì—°ë™: v1 APIë“¤ (ê´€ê´‘ ìŒì‹ì , ë¬´ë”ìœ„ì‰¼í„°, ë„ì„œê´€, ë¬¸í™”ì‹œì„¤ ë“±)

## ê¶Œì¥ ì—°ë™ ìˆœì„œ
1. OAuth ë¡œê·¸ì¸ ì™„ì „ ì—°ë™ (í˜„ì¬ 80% ì™„ë£Œ)
2. ìœ„ì¹˜ ê¸°ë°˜ í†µí•© ë°ì´í„° API ì—°ë™
3. ì‚¬ìš©ì ê´€ì‹¬ì‚¬ ê´€ë¦¬ API ì—°ë™
4. v1 APIë“¤ ì—°ë™ (ê´€ê´‘ ìŒì‹ì , ë¬´ë”ìœ„ì‰¼í„°, ë„ì„œê´€ ë“±)
5. ê²€ìƒ‰ ë° í•„í„°ë§ ê¸°ëŠ¥ ì—°ë™
