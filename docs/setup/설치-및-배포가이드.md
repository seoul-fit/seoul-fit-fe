# Seoul Fit Frontend 설치 및 배포 가이드

_작성일: 2025년 8월 18일_  
_대상: 개발자, DevOps 엔지니어_

---

## 📋 목차

- [시스템 요구사항](#시스템-요구사항)
- [로컬 개발 환경 설정](#로컬-개발-환경-설정)
- [환경 변수 설정](#환경-변수-설정)
- [개발 서버 실행](#개발-서버-실행)
- [프로덕션 빌드](#프로덕션-빌드)
- [배포 방법](#배포-방법)
- [모니터링 및 로깅](#모니터링-및-로깅)
- [문제 해결](#문제-해결)

---

## 💻 시스템 요구사항

### 최소 요구사항

```bash
# Node.js
Node.js >= 18.0.0
npm >= 9.0.0

# 메모리
RAM >= 4GB (개발)
RAM >= 8GB (프로덕션)

# 디스크 공간
여유 공간 >= 2GB

# 운영체제
Windows 10+, macOS 10.15+, Ubuntu 18.04+
```

### 권장 사양

```bash
# Node.js
Node.js >= 20.0.0
npm >= 10.0.0

# 메모리
RAM >= 8GB (개발)
RAM >= 16GB (프로덕션)

# CPU
멀티코어 프로세서 권장
```

---

## 🚀 로컬 개발 환경 설정

### 1. 저장소 클론

```bash
# HTTPS 클론
git clone https://github.com/seoul-fit/seoul-fit-fe.git
cd seoul-fit-fe

# SSH 클론 (권장)
git clone git@github.com:seoul-fit/seoul-fit-fe.git
cd seoul-fit-fe
```

### 2. Node.js 버전 확인

```bash
# Node.js 버전 확인
node --version  # v18.0.0 이상이어야 함

# npm 버전 확인
npm --version   # 9.0.0 이상이어야 함

# 버전이 낮은 경우 업데이트
# Node.js 공식 사이트에서 최신 LTS 버전 설치
# https://nodejs.org/
```

### 3. 의존성 설치

```bash
# 의존성 설치 (권장)
npm ci

# 또는 일반 설치
npm install

# 설치 확인
npm list --depth=0
```

### 4. VSCode 설정 (권장)

```bash
# VSCode 확장 프로그램 자동 설치 안내
# .vscode/extensions.json에 정의된 확장 프로그램들이 자동으로 설치 제안됨

# 수동 설치가 필요한 경우
code --install-extension bradlc.vscode-tailwindcss
code --install-extension esbenp.prettier-vscode
code --install-extension dbaeumer.vscode-eslint
```

---

## 🔧 환경 변수 설정

### 1. 환경 파일 생성

```bash
# 예시 파일 복사
cp .env.example .env.local

# 또는 수동 생성
touch .env.local
```

### 2. 필수 환경 변수

```bash
# .env.local 파일 내용

# 카카오맵 API 키 (필수)
NEXT_PUBLIC_KAKAO_MAP_API_KEY=your_kakao_map_api_key_here

# 서울 열린데이터 API 키 (필수)
SEOUL_API_KEY=your_seoul_open_data_api_key_here

# 백엔드 API URL (선택사항)
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080

# 환경 설정
NODE_ENV=development

# 디버그 모드 (선택사항)
DEBUG=true

# 로그 레벨 (선택사항)
LOG_LEVEL=info
```

### 3. API 키 발급 방법

#### 카카오맵 API 키

```bash
# 1. 카카오 개발자 콘솔 접속
https://developers.kakao.com/

# 2. 애플리케이션 생성
- "내 애플리케이션" > "애플리케이션 추가하기"
- 앱 이름: Seoul Fit Frontend
- 사업자명: 개인 또는 회사명

# 3. 플랫폼 설정
- "앱 설정" > "플랫폼"
- "Web 플랫폼 등록"
- 사이트 도메인: http://localhost:3000 (개발용)

# 4. 지도 서비스 활성화
- "제품 설정" > "지도"
- "지도" 서비스 ON

# 5. API 키 복사
- "앱 설정" > "앱 키"
- "JavaScript 키" 복사하여 환경 변수에 설정
```

#### 서울 열린데이터 API 키

```bash
# 1. 서울 열린데이터 광장 접속
https://data.seoul.go.kr/

# 2. 회원가입 및 로그인
- 무료 회원가입 진행

# 3. API 키 신청
- "데이터 신청" > "나의 신청현황"
- "API 키 신청" 클릭
- 신청서 작성 (즉시 승인)

# 4. 인증키 복사
- 발급된 "인증키" 복사하여 환경 변수에 설정
```

### 4. 환경 변수 검증

```bash
# 환경 변수 확인 스크립트 실행
npm run check-env

# 또는 수동 확인
node -e "
console.log('KAKAO_MAP_API_KEY:', process.env.NEXT_PUBLIC_KAKAO_MAP_API_KEY ? '✅ 설정됨' : '❌ 누락');
console.log('SEOUL_API_KEY:', process.env.SEOUL_API_KEY ? '✅ 설정됨' : '❌ 누락');
"
```

---

## 🏃‍♂️ 개발 서버 실행

### 1. 개발 서버 시작

```bash
# Turbopack을 사용한 개발 서버 (권장)
npm run dev

# 일반 개발 서버
npm run dev:legacy

# 특정 포트로 실행
npm run dev -- --port 3001
```

### 2. 개발 서버 확인

```bash
# 브라우저에서 접속
http://localhost:3000

# 상태 확인
curl http://localhost:3000/api/health
```

### 3. 개발 도구

```bash
# 타입 검사 (별도 터미널)
npm run type-check:watch

# 린팅 (별도 터미널)
npm run lint:watch

# 테스트 (별도 터미널)
npm run test:watch
```

---

## 🏗️ 프로덕션 빌드

### 1. 빌드 전 검증

```bash
# 모든 품질 검사 실행
npm run validate

# 개별 검사
npm run type-check  # TypeScript 타입 검사
npm run lint        # ESLint 검사
npm run test        # 테스트 실행
```

### 2. 프로덕션 빌드

```bash
# 프로덕션 빌드
npm run build

# 빌드 결과 확인
ls -la .next/

# 빌드 분석 (선택사항)
npm run analyze
```

### 3. 프로덕션 서버 실행

```bash
# 프로덕션 서버 시작
npm run start

# PM2를 사용한 프로덕션 실행 (권장)
npm install -g pm2
pm2 start ecosystem.config.js
```

### 4. 빌드 최적화

```bash
# 번들 크기 분석
npm run build:analyze

# 성능 측정
npm run lighthouse

# 의존성 분석
npm run deps:analyze
```

---

## 🚀 배포 방법

### 1. Vercel 배포 (권장)

```bash
# Vercel CLI 설치
npm install -g vercel

# 로그인
vercel login

# 프로젝트 배포
vercel

# 프로덕션 배포
vercel --prod

# 환경 변수 설정
vercel env add NEXT_PUBLIC_KAKAO_MAP_API_KEY
vercel env add SEOUL_API_KEY
```

#### Vercel 설정 파일

```json
// vercel.json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "devCommand": "npm run dev",
  "installCommand": "npm ci",
  "regions": ["icn1"],
  "env": {
    "NEXT_PUBLIC_KAKAO_MAP_API_KEY": "@kakao-map-api-key",
    "SEOUL_API_KEY": "@seoul-api-key"
  }
}
```

### 2. Docker 배포

```dockerfile
# Dockerfile
FROM node:20-alpine AS base

# 의존성 설치
FROM base AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# 빌드
FROM base AS builder
WORKDIR /app
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN npm run build

# 실행
FROM base AS runner
WORKDIR /app
ENV NODE_ENV production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT 3000

CMD ["node", "server.js"]
```

```bash
# Docker 빌드 및 실행
docker build -t seoul-fit-fe .
docker run -p 3000:3000 seoul-fit-fe
```

### 3. AWS 배포

```bash
# AWS CLI 설치 및 설정
aws configure

# S3 + CloudFront 배포
npm run build
aws s3 sync .next/static s3://your-bucket/static
aws cloudfront create-invalidation --distribution-id YOUR_DISTRIBUTION_ID --paths "/*"

# Elastic Beanstalk 배포
eb init
eb create seoul-fit-fe-prod
eb deploy
```

### 4. 자체 서버 배포

```bash
# PM2 설정 파일
// ecosystem.config.js
module.exports = {
  apps: [{
    name: 'seoul-fit-fe',
    script: 'npm',
    args: 'start',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    }
  }]
};

# 배포 스크립트
#!/bin/bash
git pull origin main
npm ci
npm run build
pm2 reload ecosystem.config.js
```

---

## 📊 모니터링 및 로깅

### 1. 성능 모니터링

```bash
# Vercel Analytics (Vercel 배포 시)
# 자동으로 활성화됨

# Google Analytics 설정
# _app.tsx에서 GA 설정 확인

# Sentry 에러 추적
npm install @sentry/nextjs
```

### 2. 로그 설정

```typescript
// lib/logger.ts
export const logger = {
  info: (message: string, meta?: any) => {
    console.log(JSON.stringify({
      level: 'info',
      message,
      meta,
      timestamp: new Date().toISOString()
    }));
  },
  error: (message: string, error?: Error) => {
    console.error(JSON.stringify({
      level: 'error',
      message,
      error: error?.stack,
      timestamp: new Date().toISOString()
    }));
  }
};
```

### 3. 헬스 체크

```typescript
// app/api/health/route.ts
export async function GET() {
  return Response.json({
    status: 'healthy',
    timestamp: new Date().toISOString(),
    version: process.env.npm_package_version
  });
}
```

---

## 🔧 문제 해결

### 일반적인 문제들

#### 1. 빌드 실패

```bash
# 캐시 정리
rm -rf .next node_modules package-lock.json
npm install
npm run build

# 메모리 부족 시
export NODE_OPTIONS="--max-old-space-size=4096"
npm run build
```

#### 2. 환경 변수 문제

```bash
# 환경 변수 확인
printenv | grep NEXT_PUBLIC

# .env.local 파일 권한 확인
ls -la .env.local

# 환경 변수 재설정
source .env.local
```

#### 3. 포트 충돌

```bash
# 포트 사용 확인
lsof -i :3000

# 프로세스 종료
kill -9 $(lsof -t -i:3000)

# 다른 포트 사용
npm run dev -- --port 3001
```

#### 4. 의존성 문제

```bash
# 의존성 재설치
rm -rf node_modules package-lock.json
npm install

# 특정 패키지 문제 시
npm ls [package-name]
npm update [package-name]
```

### 성능 문제

#### 1. 빌드 속도 개선

```bash
# Turbopack 사용 (개발)
npm run dev

# 병렬 빌드
export NODE_OPTIONS="--max-old-space-size=8192"
npm run build
```

#### 2. 런타임 성능 개선

```typescript
// next.config.ts
const nextConfig = {
  // 이미지 최적화
  images: {
    formats: ['image/webp', 'image/avif'],
  },
  
  // 압축 활성화
  compress: true,
  
  // 실험적 기능
  experimental: {
    optimizeCss: true,
    optimizePackageImports: ['lucide-react'],
  }
};
```

### 배포 문제

#### 1. Vercel 배포 실패

```bash
# 로그 확인
vercel logs

# 환경 변수 확인
vercel env ls

# 재배포
vercel --force
```

#### 2. Docker 배포 문제

```bash
# 로그 확인
docker logs container-name

# 컨테이너 내부 접속
docker exec -it container-name sh

# 이미지 재빌드
docker build --no-cache -t seoul-fit-fe .
```

---

## 📚 추가 리소스

### 공식 문서

- [Next.js 배포 가이드](https://nextjs.org/docs/deployment)
- [Vercel 문서](https://vercel.com/docs)
- [Docker 공식 문서](https://docs.docker.com/)

### 커뮤니티 지원

- [GitHub Issues](https://github.com/seoul-fit/seoul-fit-fe/issues)
- [GitHub Discussions](https://github.com/seoul-fit/seoul-fit-fe/discussions)

### 모니터링 도구

- [Vercel Analytics](https://vercel.com/analytics)
- [Google Analytics](https://analytics.google.com/)
- [Sentry](https://sentry.io/)

---

이 가이드를 따라 설치 및 배포를 진행하시면 Seoul Fit Frontend를 성공적으로 운영할 수 있습니다. 추가 질문이나 문제가 있으시면 GitHub Issues를 통해 문의해 주세요!
